# OS

## 1、进程调度策略？

进程调度策略是操作系统用于决定在多道程序环境中哪个进程将被分配CPU执行的算法。常见的进程调度策略包括：

1. 先来先服务（First-Come, First-Served，FCFS）：按照进程到达的顺序进行调度，即先到达的进程先执行。

2. 最短作业优先（Shortest Job Next，SJN）：选择估计执行时间最短的进程进行执行。也可以是实际执行时间最短的进程（最短剩余时间优先，Shortest Remaining Time First，SRTF）。

3. 优先级调度（Priority Scheduling）：为每个进程分配一个优先级，优先级高的进程先执行。可以是静态优先级，由进程的属性或固定设置决定，也可以是动态优先级，根据进程的行为和需求动态调整。

4. 时间片轮转（Round-Robin，RR）：按照预先设定的时间片大小（时间量子），轮流将CPU分配给每个进程，如果进程在一个时间片内未执行完，则放回就绪队列尾部继续等待。

5. 多级反馈队列调度（Multilevel Feedback Queue，MLFQ）：将就绪队列分成多个优先级队列，每个队列使用不同的调度算法，例如时间片轮转和优先级调度的结合。根据进程的行为和需求，进程可以在不同队列间移动。

6. 最高响应比优先（Highest Response Ratio Next，HRRN）：根据进程的响应比（等待时间加服务时间除以服务时间），选择响应比最高的进程进行执行。

7. 多处理器调度：针对多个处理器系统，将进程分配给多个处理器以实现并行执行。可以使用上述调度策略的变种。

以上是一些常见的进程调度策略，不同的调度策略适用于不同的场景和需求。实际操作系统通常会使用一种或多种调度策略的组合来实现更好的性能和资源利用。

## 2、FreeRtos进程调度策略？

FreeRTOS 是一个流行的实时操作系统 (RTOS)，用于嵌入式系统开发。在 FreeRTOS 中，进程被称为任务（task）。FreeRTOS 提供了几种任务调度策略，以满足不同的实时需求和应用场景。

以下是 FreeRTOS 中常见的任务调度策略：

1. 抢占式调度（Preemptive Scheduling）：
   - 默认的任务调度策略是抢占式调度，也被称为优先级抢占式调度。
   - 在抢占式调度中，每个任务都有一个优先级，并且具有较高优先级的任务可以打断正在执行的较低优先级任务。
   - 当一个优先级更高的任务准备就绪时，它会立即抢占正在执行的任务，并开始执行。
   - 抢占式调度使得高优先级任务能够及时响应，并保证了系统对实时任务的及时性响应。

2. 协作式调度（Cooperative Scheduling）：
   - FreeRTOS 也支持协作式调度，通过任务主动让出 CPU 来实现任务之间的切换。
   - 在协作式调度中，任务需要显式地调用任务切换函数（如 `taskYIELD()`）来让出 CPU。
   - 任务切换只会在任务自愿让出 CPU 时发生，因此需要确保任务之间合作良好，避免长时间占用 CPU 导致系统无法响应其他任务。

3. 时间片轮转调度（Time Slicing）：
   - FreeRTOS 还支持时间片轮转调度，可与抢占式调度结合使用。
   - 在时间片轮转调度中，每个任务被分配一个固定的时间片，任务在时间片内执行，然后让出 CPU 给下一个任务。
   - 如果任务在时间片结束前未完成，它将被放回就绪队列的末尾，并等待下一次调度。

需要注意的是，FreeRTOS 可以根据实际需求和配置进行灵活的调度策略选择和配置。可以通过配置文件或 API 函数进行任务优先级、调度策略、时间片大小等的设置和调整。

以上是 FreeRTOS 中常见的任务调度策略。选择合适的调度策略取决于应用程序的实时需求、响应性要求和系统资源。

## Linux进程调度策略？

Linux的进程调度是指操作系统决定在多道程序环境中，哪个进程将被分配CPU资源进行执行。Linux的进程调度是一个复杂的机制，旨在提供高效的资源利用和良好的响应性能。

Linux的进程调度具有以下特点和机制：

1. 多级反馈队列调度（Multilevel Feedback Queue，MLFQ）：
   - Linux使用多级反馈队列调度策略，将进程按照优先级分组，并为每个组分配不同的时间片大小。
   - 高优先级的进程可以使用较小的时间片，从而更快地获得CPU资源。
   - 低优先级的进程则使用较大的时间片，以免长时间占用CPU。

2. 动态优先级调度：
   - Linux的进程调度是动态的，进程的优先级可以根据不同的条件和行为进行调整。
   - 进程的优先级可以根据进程等待时间、CPU使用时间、IO操作等进行动态调整，以提供公平的资源分配。

3. 实时调度：
   - Linux提供了实时调度策略，用于对实时任务进行特殊处理，以确保它们能够按时得到响应。
   - 实时调度分为FIFO（先进先出）和RR（轮转）两种调度策略，它们针对实时任务提供了保证性能和响应性的保障。

4. CFS调度器：
   - Linux的默认调度器是完全公平调度器（Completely Fair Scheduler，CFS）。
   - CFS调度器通过计算每个进程的虚拟运行时间来进行调度决策，以实现对CPU时间的公平分配。
   - CFS调度器旨在提供良好的响应性能和资源利用率。

5. 实时时钟：
   - Linux使用实时时钟（tickless timer）来跟踪时间，而不是每个时钟滴答都触发中断。
   - 这种实时时钟的使用减少了中断处理开销，并提高了系统的响应性。

需要注意的是，Linux的进程调度是高度可配置的。可以通过调整调度器参数、优先级、策略等进行微调和定制，以满足特定应用需求。

总体而言，Linux的进程调度采用多级反馈队列调度、动态优先级调度和实时调度等策略，旨在提供高效的资源利用、公平性和响应性能。它的灵活性和可配置性使得它适应了各种不同的应用场景和需求。