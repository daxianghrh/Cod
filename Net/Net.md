# 计算机网络相关问题

## 1、tcp三次握手，accept对应三次握手中的哪一次？

`TCP`服务端和客户端连接模型如下所示：

![](../image/tcp连接图.png)

`accept`应该位于第三次握手之后，我们来看看`TCP`连接过程：

-   初始：客户端处于CLOSED状态，而服务器端从CLOSED状态变为LISTEN状态

-   第一步：客户端发送一个SYN序列号

-   第二步：服务器端接收来自客户端的连接请求，并返回ACK+SYN

-   第三步：客户端接收消息，返回ACK

-   第三步之后，服务器接收到消息，连接就完成了。这样就可以调用`accept`函数获得此连接。

accept其实也可以在第三步，原因是，此时accept函数要给此次连接分配资源，最初是想这样设计；但是，设想如果有10000甚至更多个客户端都和该服务器连接，发送SYN，服务端收到之后，这些客户端却不再理会服务端的回复，然而此时服务端的资源却都用accept()分配了。这就是所谓的DDOS攻击。

为了解决这个问题，**`accept()`于是被放在三次握手之后**。
